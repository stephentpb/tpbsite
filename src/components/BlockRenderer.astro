---
import HeroBlock from './blocks/HeroBlock.astro';
import EventsBlock from './blocks/EventsBlock.astro';
import AdBlock from './blocks/AdBlock.astro';

// Safe fallback: if blocks is null/undefined, use empty array
const blocks = Astro.props.blocks ?? [];
---

{blocks.length === 0 ? (
  <p class="text-gray-600">No content available.</p>
) : (
  blocks.map((block) => {
    switch (block._type) {
      case 'hero':
        return <HeroBlock block={block} />;
      case 'events':
        return <EventsBlock block={block} />;
      case 'ad':
        return <AdBlock block={block} />;
      default:
        return <p>{block.text || ''}</p>;
    }
  })
)}
