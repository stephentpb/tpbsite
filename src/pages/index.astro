---
import BaseLayout from '../layouts/BaseLayout.astro';
import BlockRenderer from '../components/BlockRenderer.astro';
import { sanity } from '../lib/sanity';

// Fetch homepage content from Sanity
const page = await sanity.fetch(
  `*[_type=="page" && slug.current=="home"][0]{
    title,
    content,
    seoTitle,
    seoDescription,
    "seoImage": seoImage.asset->url
  }`
);

if (!page) throw new Error('Homepage not found');
---
<BaseLayout
  title={page.seoTitle || page.title}
  description={page.seoDescription}
  ogImage={page.seoImage}
>
  <BlockRenderer blocks={page.content} />
</BaseLayout>
